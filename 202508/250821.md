# 📆 2025-08-21 ()
## 🥅 오늘 목표 
- [ ] 일 목표한 것들 하기 
- [ ] 여행 계획 세우기 

## ☑️ 오늘 한 일 📑 ( 목표하지 않았지만 추가된 것들 )

***

## 🔍️ 오늘 무엇을 했나요? Review
### [WORK] 
코드 리뷰를 남기면서 내가 모르는 부분에 대해서도 검색해보고 학습함 

#### `@Generated` 어노테이션
#### `@Generated` 와 `entityManager.refresh()`

#### 추가 개발 사항 요건에 대해서 의견 제시 
추가 개발사항이 들어왔을 때, 먼저 문제부터 다시 재정의하고 그 문제에 대해서 더 적절한 해결책과 근거를 제시함.
의사결정에 도움이 될 수 있도록 제안한 해결책으로 개발을 진행했을 때 어떤 작업들이 이루어져야 하는지도 같이 제시. 

#### 일괄 처리 로직 성능을 개선하기 위해 문제점 찾고 해결책 제시 
원래 50건 정도 등록할 때 17초가 넘게 걸렸으나, 해결 후 100개 등록시 15초로 줄임.
1건당 평균 처리 시간 기준으로 보면 약 56% 정도 성능이 향상되었으며, 전체 등록 시간도 약 12% 단축

##### 의심되는 원인
- 레거시 DB에 member를 등록하고 신규 member와 매핑하기 위해 신규 회원 저장시 레거시 db pk를 발급해서 레거시에 넣어주는 형태로 되어있음
  - 시퀀스를 활용하여 member를 생성할 때마다 시퀀스 조회를 함. 
  - 대량 회원가입시, 루프를 돌면서 계속 시퀀스를 조회하기 때문에 성능이 저하됨 
    - DB에 접근하는 것은 애플리케이션 메모리에서 연산하는 것보다 훨씬 비쌈
    - 퀀스 조회처럼 단순한 연산이라도 횟수가 많으면 전체 트래픽을 잡아먹음
    - DB와 연결할 수 있는 커넥션 수는 제한되어 있으며, 반복적인 조회로 인해 커넥션 풀이 고갈되면 대기 시간 증가 또는 접속 지연이 발생
    - DB 호출은 네트워크 통신을 수반하므로, 호출-응답 간 시간 동안 쓰레드가 블로킹되거나 컨텍스트 스위칭이 반복되어 CPU 효율이 낮아짐
    - 대량 처리 시 루프마다 DB에 접근하면 수백~수천 번의 네트워크 I/O가 발생하여 DB에 과부하
  - 또, 이렇게 구현할 경우 시퀀스는 트랜잭션이 실패해도 롤백이 되지 않기때문에 시퀀스가 널뜀 

##### 해결방안
- 신규 DB의 레거시 db pk에 기존에 사용중이던 시퀀스를 디폴트 값으로 지정하여 DB가 생성하도록 책임을 넘김
- 이전에도 해당 방법을 고안했으나, JPA의 insert 정책은 전체 필드에 대해서 쿼리를 생성하여 요청함. 
- 이렇게되면 쿼리에 `INSERT members (...생략 ) old_member_id = null` 이런식으로 요청되기 때문에 디폴트가 저장되지 않고 `null`이 들어감
- 디폴트 값이 적용되려면 인서트시 필드를 선언하면 안됨
- 이를 처리하기 위해서 JPA에서 제공하는 기능으로 `@DynamicInsert`가 있음 이것을 사용하면 명시적으로 입력된 값에 대해서만 인서트 쿼리를 날림. 
  - 사용시 주의해야 할 점은 명시적으로 입력된 값에 대해서마 인서트를 날리기 때문에, 코드에서의 디폴트 DB에서 디폴트 처리를 잘 해줘야 함. 

 

##### 결과 
기존
- 50건의 데이터를 등록하는 데 약 17초

개선후
- 100건의 데이터를 등록하는 데 약 15초

요약
- 1건당 평균 처리 시간 기준으로 보면 약 56% 정도 성능이 향상되었으며, 전체 등록 시간도 약 12% 단축


## 💡 오늘 회고
AI에대해서 반대하는 건 아닌데, 무조건 AI를 활용해라 바이브코딩해라 이런것들에 회의적이다. 비행기도 자율주행이 가능하지만 비행기 조종사 자격증이 있어야하고 비행을 할 줄 알아야하는 것처럼 코딩 역시 기본적으로 소양을 갖추고 계속해서 기술력을 갖춰야한다고 생각한다. 또, 서비스란 맥락에 따라 어떤 목적에 따라 같은 기능이라도 다르게 구현될 여지가 매우 많다. 문제에 따라 여러 해결책이 있듯 그러나 AI를 사용하면 이런 것들을 파악하기 힘들다. 그만큼 AI에게 컨텍스츠를 공들여서 설명하고 AI가 코드를 짜주면 다시 그걸 검토하고 이걸 계속해서 반복해야한다. 이것이 확실히 AI를 잘쓰며 그정도 리뷰를 할 줄 알고 AI를 자기가 원하는 방향으로 조절할 수 있다면 생산성이 올라가겠지만, 그렇지 않은 입문자 혹은 주니어 레벨(?) (주니어라고 칭하는게 애매하긴 함) 의 사람들이 AI에 의존적인 개발을 한다면 대다수 실력은 그자리이고 그 코드를 나중에 볼 사람들 혹은 리뷰어들만 고통일 것이다. 잘 짜줬다면 상관없겠지만… 근데 이 와중에 다른 서비스를 이용하는데 그 서비스를 설치하고 세팅하는 것을 모든 팀원이 학습해야한다고 주장하는게 이해가 되지 않음… 

스터디가 오늘도 재밌었고, 외국 기업은 커서 그런지 문화가 달라서 그런지 빠른 실패 빠른 도움 요청 빠르 피드백에 익숙하다는 느낌을 받았다. 외국 기업에 취업하려면 어떻게 해야할지 좀 더 관심이 생김. 일단, 언어를 계속해서 배워야겠다는 생각이 들었다. 어쨌든 의사소통이 되야하니깐. 

이력서 제출하자마자 광탈했다. 나름 이전의 이력서보다 잘썼다고 생각했는데.. 감사하게도 동료분이 이런 멘토링을 하셔서 도움을 주시겠다고 먼저 제안을 해주셨다. 
이력서를 검토한 결과 일단, 나를 아는 사람들은 공감하고 나를 잘 드러냈다고 좋다고 생각하겠지만, 나를 모르는 사람의 입장에서는 어렵다고 생각할 것. 그러니깐 근거가 없는 주장이니 신뢰가 떨어질 것이고 눈에 잘 안들어옴. 

내가 주도적으로 해결한 것들을 어필하고 강조된 것들만 봐도 이 사람이 이 일을 왜? 어떻게?해서 무슨 성과를 냈는지 알 수 있게 만들어야 한다는 점. 일단, 서류가 통과해야 면접에 불러줄테니 하루에 300장씩 이력서를 보고있는 채용 담당자의 피로를 줄이게금 눈길을 끄는 이력서를 작성해야한다는점. 

## 🎯 내일 할 일
***

## 🏁 이번주 목표 🏁
