# 📆 2025-08-19 (화)
## 🥅 오늘 목표 
- [ ] 일 목표한 것들 하기 
- [ ] 기술 블로그 글 쓰기 

## ☑️ 오늘 한 일 📑 ( 목표하지 않았지만 추가된 것들 )

***

## 🔍️ 오늘 무엇을 했나요? Review
### [WORK] 
개선에 대한 제안 글을 AI를 사용해서 다듬어서 좀 더 부드럽고 정중한 말투로 보냄. 잘 설득이 된거 같아서 다행
- 하루 휴가내었지만 하루간 업무 팔로업을 진행했음 
- 그런데 뭔가 우당탕탕 긴급배포!! 된 것들이 있었고 그렇게 의사결정되어서 배포되었으면 안되었을 듯한 일들이 있었지만 이미 배포된거고 운영에 문제없는 방향으로 다시 개선을 재안함. 
- 운영 이슈가 발생하면 너무 우당탕탕 급하게 처리되는 경우가 있는데 이런식으로 일 처리되는 것을 줄여야 할 듯… 

백엔드 작업을 할 때는 확실히 문서화와 테스트 작성을 제외하고는 AI를 잘 안쓰는데 그게 더 빠르고 버그가 적다.. 프론트는 잘 모르니깐 95프로 AI를 쓰는데 잡도리를 꽤 하다보면 원하는 UI/UX로 만들어주는데 자잘한 버그가 생긴다. 근데 그 버그를 지가 만들어서 그런가 못잡음 ;;;; 프론트도 좀 진득히 코드를 살펴봐야겠음을 느낌. 


오전에 리뷰와 작업을 하면서 변경이 더 쉽도록 만들어야겠다는 생각을 함 
  - 뭔가 하나의 로직이 추가되면 그걸로 끝이 났으면 좋겠는데 지금은 여기저기 막 비슷한 코드, 중복 코드들이 퍼져있다보니깐 다 챙긴건가? 의문이 듬 
  - 여러 개발자가 같이 개발하면 어쩔 수 없는 것인가라는 생각이 들었다. 

### Optional.orElse 와 Optional.orElseGet의 차이 
```java
  public T orElse(T other) {
        return value != null ? value : other;
    }
```

```java
   public T orElseGet(Supplier<? extends T> supplier) {
        return value != null ? value : supplier.get();
    }
```

orElseGet은 값이 null이면 supplier를 get하기 때문에 `orElseGet(null)` 같이 처리한다면 NPE가 발생함
***

### jpa @DynamicInsert

레거시와 신규 DB를 같이 쓰고있어 데이터를 양쪽에 부어주다보니 양쪽의 pk값을 신규DB에서 알고있어야한다. 그래서 레거시 pk를 미리생성해서 넣어주도록 처리하고 있는데, 이때 자동 시퀀스를 쓰는게 아니라 시퀀스를 조회해서 넣어주다보니 벌크 연산, 그냥 회원가입 등을 처리할 때 DB를 한 번 더 읽어들여서 느려지는 이슈가 있었다. 또 동시성과 트랜잭션 실패시 시퀀스는 롤백되지 않고 그냥 올라가는 이슈도 있었다. 계속 이거는 별로 안좋은 방법이라 개선해야겠다고 생각이 들었다. 일단, 시퀀스를 해당 컬럼 디폴트 값으로 넣어두어 값을 넣지 않고 알아서 증가하도록 처리했다. 그러면 저장된 객체에서 해당 값을 가져와 레거시 DB에 넣으면 되니깐, 그러나 문제는 JPA에서는 null로 처리를 하더라도 insert문이 모든 필드에 대해서 넣기 때문에 그냥 null로 값이 들어가버린다는 문제가 있다. 디폴트 값이 들어가도록 하려면 해당 필드에 값을 아예 넣지 않으면 되는데 이때 쓰는 것이 JPA의 `@DynamicInsert`이다. 

이 애노테이션을 적용하면 Hibernate는 null이 아닌 값을 가진 열만 포함하는 SQL 삽입 문을 생성하여 SQL 쿼리에 불필요한 열이 포함되지 않도록 한다. 

참고 글 
- [인프런 영한님 질문 답](https://www.inflearn.com/community/questions/16697/%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%EA%B3%A0%EA%B2%AC-%EA%B5%AC%ED%95%A9%EB%8B%88%EB%8B%A4)
- [baeldung-dynamicinsert](https://www.baeldung.com/spring-data-dynamicinsert)

## 💡 오늘 회고
4일 쉬고 일을 하니 정신적인 방어력이 회복이 되었나 평소보다는 재밌게 일했던거 같다. AI로 무지성 개발도 안하고 계속 골머리 앓고 있던 프론트 버그도 해결했다. 그리고 위에서 적어놨지만 여러 이슈들도 해결했다. 물론 진짜 하기 싫은 스터디를 매주 해야하는게 추가되었지만... 

이제 새로운 도전들을 시작할 때가 되어서 그 도전들을 진행하면서 또 얼마나 성장할지 기대가 되면서도 무섭다. 우선 그 도전들을 좀 더 만족스럽게 내가 할 수 있는 한 최선을 다하고 싶기에 잠시 내려두었던 공부와 여러 시도들을 다시 해보려한다. 

지금 이 순간 내가 할 수 있는 최선을 다하면 좋은 일은 반드시 올거다. 
좋은 일도 생각하기 나름이라고 긍정의 힘으로! 나는 잘 될거야. 

## 🎯 내일 할 일
***

## 🏁 이번주 목표 🏁
